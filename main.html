<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Text-to-Speech Application</title>
</head>
<body>
  <h1>Text-to-Speech Application</h1>
  <div>
    <label for="voices">Select Voice:</label>
    <select id="voices"></select>
  </div>
  <div>
    <label for="rate">Rate:</label>
    <input type="range" id="rate" min="0.5" max="2" step="0.1" value="1">
  </div>
  <div>
    <label for="pitch">Pitch:</label>
    <input type="range" id="pitch" min="0" max="2" step="0.1" value="1">
  </div>
  <div>
    <textarea id="text" rows="5" cols="50"></textarea>
  </div>
  <div>
    <button id="startBtn">Start</button>
    <button id="stopBtn">Stop</button>
  </div>

  <script>
    // Get references to the HTML elements
    const voicesDropdown = document.getElementById('voices');
    const rateSlider = document.getElementById('rate');
    const pitchSlider = document.getElementById('pitch');
    const textInput = document.getElementById('text');
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');

    // Initialize the speech synthesis
    const synth = window.speechSynthesis;

    // Populate the voices dropdown with available voices
    function populateVoices() {
      const voices = synth.getVoices();

      voicesDropdown.innerHTML = voices
        .map(voice => `<option value="${voice.name}">${voice.name}</option>`)
        .join('');
    }

    // Event listener for when voices are loaded
    synth.addEventListener('voiceschanged', populateVoices);

    // Event listener for the start button
    startBtn.addEventListener('click', () => {
      // Check if speech synthesis is already speaking
      if (synth.speaking) {
        console.error('Speech synthesis is already in progress.');
        return;
      }

      // Create a new speech synthesis utterance
      const utterance = new SpeechSynthesisUtterance(textInput.value);

      // Set the selected voice
      const selectedVoice = voicesDropdown.value;
      const voices = synth.getVoices();
      const voice = voices.find(v => v.name === selectedVoice);
      utterance.voice = voice;

      // Set the rate and pitch
      utterance.rate = rateSlider.value;
      utterance.pitch = pitchSlider.value;

      // Start speaking
      synth.speak(utterance);
    });

    // Event listener for the stop button
    stopBtn.addEventListener('click', () => {
      // Stop speaking
      synth.cancel();
    });
  </script>
</body>
</html>
